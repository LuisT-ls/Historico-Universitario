// Script para verificar configura√ß√£o de dom√≠nio OAuth
// Execute este c√≥digo no console do navegador

console.log('üîç Verifica√ß√£o de Dom√≠nio OAuth - Firebase')
console.log('==========================================')

// Informa√ß√µes do dom√≠nio atual
console.log('üìã Informa√ß√µes do Dom√≠nio:')
console.log(`   Dom√≠nio: ${window.location.hostname}`)
console.log(`   URL: ${window.location.href}`)
console.log(`   Protocolo: ${window.location.protocol}`)
console.log('')

// Verificar se est√° em HTTPS (recomendado para produ√ß√£o)
if (window.location.protocol === 'https:') {
  console.log('‚úÖ Protocolo HTTPS detectado')
} else {
  console.log('‚ö†Ô∏è  Protocolo HTTP detectado (HTTPS recomendado para produ√ß√£o)')
}

// Verificar se √© um dom√≠nio conhecido
const currentDomain = window.location.hostname
const knownDomains = ['historicoacademico.vercel.app', 'localhost', '127.0.0.1']

if (knownDomains.includes(currentDomain)) {
  console.log(`‚úÖ Dom√≠nio reconhecido: ${currentDomain}`)
} else {
  console.log(`‚ö†Ô∏è  Dom√≠nio n√£o reconhecido: ${currentDomain}`)
  console.log('üí° Adicione este dom√≠nio no Firebase Console')
}

console.log('')
console.log('üìù Pr√≥ximos Passos:')
console.log('1. Acesse: https://console.firebase.google.com/')
console.log('2. Selecione seu projeto')
console.log('3. V√° para Authentication > Settings')
console.log('4. Adicione o dom√≠nio na se√ß√£o "Authorized domains"')
console.log('5. Aguarde alguns minutos e teste novamente')
console.log('')

// Fun√ß√£o para testar login (se Firebase estiver dispon√≠vel)
if (typeof firebase !== 'undefined') {
  console.log('üîê Firebase detectado - Teste de login dispon√≠vel')
  console.log('Execute: testGoogleLogin() para testar')

  window.testGoogleLogin = async function () {
    try {
      const auth = firebase.auth()
      const provider = new firebase.auth.GoogleAuthProvider()
      const result = await auth.signInWithPopup(provider)
      console.log('‚úÖ Login bem-sucedido!', result.user.email)
    } catch (error) {
      console.error('‚ùå Erro no login:', error.code, error.message)

      if (error.code === 'auth/unauthorized-domain') {
        console.log('üí° Solu√ß√£o: Adicione o dom√≠nio no Firebase Console')
      }
    }
  }
} else {
  console.log('‚ö†Ô∏è  Firebase n√£o detectado')
  console.log('üí° Certifique-se de que o Firebase SDK est√° carregado')
}

console.log('==========================================')
console.log('‚úÖ Verifica√ß√£o conclu√≠da')
