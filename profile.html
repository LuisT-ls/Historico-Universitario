<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perfil - Histórico Universitário</title>

    <!-- Meta tags para SEO e compartilhamento -->
    <meta
      name="description"
      content="Gerencie seu perfil no Histórico Universitário. Atualize informações pessoais, configurações da conta e preferências do sistema."
    />
    <meta name="robots" content="noindex, follow" />
    <link rel="canonical" href="/profile.html" />

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Perfil - Histórico Universitário" />
    <meta
      property="og:description"
      content="Gerencie seu perfil no Histórico Universitário. Atualize informações pessoais, configurações da conta e preferências do sistema."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://historicoacademico.vercel.app/profile.html"
    />
    <meta property="og:site_name" content="Histórico Universitário" />
    <meta
      property="og:image"
      content="https://historicoacademico.vercel.app/assets/img/og-image.jpg"
    />
    <meta property="og:image:alt" content="Perfil - Histórico Universitário" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Perfil - Histórico Universitário" />
    <meta
      name="twitter:description"
      content="Gerencie seu perfil no Histórico Universitário."
    />
    <meta
      name="twitter:image"
      content="https://historicoacademico.vercel.app/assets/img/og-image.jpg"
    />

    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/profile.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="assets/img/favicon/favicon.ico"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="site-header">
      <div class="header-content">
        <div class="header-left">
          <a href="/" class="logo">
            <i class="fas fa-graduation-cap"></i>
            <span>Histórico Universitário</span>
          </a>
        </div>

        <div class="header-right">
          <nav class="main-nav">
            <a href="/" class="nav-link">
              <i class="fas fa-home"></i>
              <span>Início</span>
            </a>
            <a href="profile.html" class="nav-link active">
              <i class="fas fa-user"></i>
              <span>Perfil</span>
            </a>
          </nav>

          <div class="user-menu">
            <button class="user-button" id="userButton">
              <i class="fas fa-user-circle"></i>
              <span id="userName">Usuário</span>
              <i class="fas fa-chevron-down"></i>
            </button>
            <div class="user-dropdown">
              <div class="user-info">
                <div class="user-avatar">
                  <i class="fas fa-user-circle"></i>
                </div>
                <div class="user-details">
                  <span class="user-name" id="dropdownUserName">Usuário</span>
                  <span class="user-email" id="dropdownUserEmail"
                    >usuario@email.com</span
                  >
                </div>
              </div>
              <div class="dropdown-menu">
                <a href="profile.html" class="dropdown-item">
                  <i class="fas fa-user-edit"></i>
                  <span>Editar Perfil</span>
                </a>
                <a href="#" class="dropdown-item" id="changePasswordBtn">
                  <i class="fas fa-key"></i>
                  <span>Alterar Senha</span>
                </a>
                <div class="dropdown-divider"></div>
                <button class="dropdown-item logout-btn" id="logoutBtn">
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Sair</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <div class="profile-header">
          <h1>Meu Perfil</h1>
          <p>Gerencie suas informações pessoais e configurações da conta</p>
        </div>

        <div class="profile-content">
          <!-- Informações Pessoais -->
          <section class="profile-section">
            <div class="section-header">
              <h2><i class="fas fa-user"></i> Informações Pessoais</h2>
              <p>Atualize seus dados pessoais e acadêmicos</p>
            </div>

            <form id="profileForm" class="profile-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="fullName">Nome Completo</label>
                  <input type="text" id="fullName" name="fullName" required />
                </div>
                <div class="form-group">
                  <label for="email">E-mail</label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    disabled
                    placeholder="Seu e-mail será exibido aqui"
                  />
                  <small>O e-mail não pode ser alterado</small>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="institution">Instituição</label>
                  <input
                    type="text"
                    id="institution"
                    name="institution"
                    placeholder="Nome da sua universidade"
                  />
                </div>
                <div class="form-group">
                  <label for="course">Curso</label>
                  <input
                    type="text"
                    id="course"
                    name="course"
                    placeholder="Ex: Engenharia de Produção"
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="enrollment">Matrícula</label>
                  <input
                    type="text"
                    id="enrollment"
                    name="enrollment"
                    placeholder="Número de matrícula"
                  />
                </div>
                <div class="form-group">
                  <label for="startYear">Ano de Ingresso</label>
                  <input
                    type="number"
                    id="startYear"
                    name="startYear"
                    min="2000"
                    max="2030"
                  />
                </div>
                <div class="form-group">
                  <label for="startSemester">Semestre de Ingresso</label>
                  <select id="startSemester" name="startSemester">
                    <option value="1">1º Semestre</option>
                    <option value="2">2º Semestre</option>
                  </select>
                </div>
              </div>

              <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-save"></i>
                  Salvar Alterações
                </button>
              </div>
            </form>
          </section>

          <!-- Configurações da Conta -->
          <section class="profile-section">
            <div class="section-header">
              <h2><i class="fas fa-cog"></i> Configurações da Conta</h2>
              <p>Gerencie suas preferências e configurações</p>
            </div>

            <div class="settings-grid">
              <div class="setting-item">
                <div class="setting-info">
                  <h3>Notificações</h3>
                  <p>Receber avisos importantes</p>
                </div>
                <div class="setting-control">
                  <select id="notificationsSelect" class="form-select">
                    <option value="true">Ativar</option>
                    <option value="false">Desativar</option>
                  </select>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <h3>Privacidade</h3>
                  <p>Visibilidade dos seus dados</p>
                </div>
                <div class="setting-control">
                  <select id="privacySelect" class="form-select">
                    <option value="private">Privado</option>
                    <option value="public">Público</option>
                  </select>
                </div>
              </div>
            </div>
          </section>

          <!-- Estatísticas -->
          <section class="profile-section">
            <div class="section-header">
              <h2><i class="fas fa-chart-bar"></i> Estatísticas</h2>
              <p>Resumo do seu progresso acadêmico</p>
            </div>

            <div class="stats-grid" id="statsGrid">
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-book"></i>
                </div>
                <div class="stat-content">
                  <h3>Disciplinas</h3>
                  <div class="stat-value" id="totalDisciplines">0</div>
                  <div class="stat-label">Total cadastradas</div>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-content">
                  <h3>Concluídas</h3>
                  <div class="stat-value" id="completedDisciplines">0</div>
                  <div class="stat-label">Disciplinas finalizadas</div>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-clock"></i>
                </div>
                <div class="stat-content">
                  <h3>Em Andamento</h3>
                  <div class="stat-value" id="inProgressDisciplines">0</div>
                  <div class="stat-label">Disciplinas atuais</div>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-star"></i>
                </div>
                <div class="stat-content">
                  <h3>Média Geral</h3>
                  <div class="stat-value" id="averageGrade">0.0</div>
                  <div class="stat-label">Nota média</div>
                </div>
              </div>
            </div>
          </section>

          <!-- Ações da Conta -->
          <section class="profile-section">
            <div class="section-header">
              <h2><i class="fas fa-shield-alt"></i> Segurança da Conta</h2>
              <p>Ações importantes para proteger sua conta</p>
            </div>

            <div class="account-actions">
              <div class="action-card">
                <div class="action-icon">
                  <i class="fas fa-key"></i>
                </div>
                <div class="action-content">
                  <h3>Alterar Senha</h3>
                  <p>Atualize sua senha para manter a conta segura</p>
                  <button class="btn btn-secondary" id="changePasswordAction">
                    Alterar Senha
                  </button>
                </div>
              </div>

              <div class="action-card">
                <div class="action-icon">
                  <i class="fas fa-download"></i>
                </div>
                <div class="action-content">
                  <h3>Exportar Dados</h3>
                  <p>Faça backup dos seus dados acadêmicos</p>
                  <button class="btn btn-secondary" id="exportDataBtn">
                    Exportar
                  </button>
                </div>
              </div>

              <div class="action-card danger">
                <div class="action-icon">
                  <i class="fas fa-trash"></i>
                </div>
                <div class="action-content">
                  <h3>Excluir Conta</h3>
                  <p>Exclua permanentemente sua conta e todos os dados</p>
                  <button class="btn btn-danger" id="deleteAccountBtn">
                    Excluir Conta
                  </button>
                </div>
              </div>

              <div class="action-card">
                <div class="action-icon">
                  <i class="fas fa-sign-out-alt"></i>
                </div>
                <div class="action-content">
                  <h3>Encerrar Todas as Sessões</h3>
                  <p>
                    Desconecte sua conta de todos os dispositivos e sessões
                    ativas para maior segurança.
                  </p>
                  <button class="btn btn-warning" id="logoutAllSessionsBtn">
                    Encerrar Sessões
                  </button>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>

    <!-- Modal de Alteração de Senha -->
    <div class="modal-overlay" id="changePasswordModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3><i class="fas fa-key"></i> Alterar Senha</h3>
          <button class="modal-close" id="closePasswordModal">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <form id="changePasswordForm" class="modal-form">
          <div class="form-group">
            <label for="currentPassword">Senha Atual</label>
            <input type="password" id="currentPassword" required />
          </div>

          <div class="form-group">
            <label for="newPassword">Nova Senha</label>
            <input type="password" id="newPassword" required minlength="6" />
          </div>

          <div class="form-group">
            <label for="confirmNewPassword">Confirmar Nova Senha</label>
            <input
              type="password"
              id="confirmNewPassword"
              required
              minlength="6"
            />
          </div>

          <div class="form-actions">
            <button
              type="button"
              class="btn btn-secondary"
              id="cancelPasswordChange"
            >
              Cancelar
            </button>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save"></i>
              Alterar Senha
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal de confirmação de exclusão de conta -->
    <div id="deleteAccountModal" class="modal" style="display: none">
      <div class="modal-content danger">
        <div class="modal-header">
          <h2>
            <i class="fas fa-exclamation-triangle"></i> Confirmar Exclusão
          </h2>
        </div>
        <div class="modal-body">
          <p>
            Para confirmar a exclusão permanente da sua conta e de todos os seus
            dados, digite <strong>EXCLUIR</strong> no campo abaixo:
          </p>
          <input
            type="text"
            id="deleteConfirmInput"
            autocomplete="off"
            placeholder="Digite EXCLUIR"
            style="width: 100%; padding: 8px; font-size: 1.1em"
          />
          <small
            id="deleteConfirmHint"
            style="color: #b00; display: block; margin-top: 8px"
            >Atenção: não é possível colar, é necessário digitar
            manualmente.</small
          >
          <label
            for="deletePasswordInput"
            style="margin-top: 16px; display: block"
            >Digite sua senha para confirmar:</label
          >
          <input
            type="password"
            id="deletePasswordInput"
            autocomplete="current-password"
            placeholder="Senha da sua conta"
            style="
              width: 100%;
              padding: 8px;
              font-size: 1.1em;
              margin-bottom: 8px;
            "
          />
          <small id="deletePasswordHint" style="color: #b00; display: block"
            >Sua senha é necessária para confirmar a exclusão por
            segurança.</small
          >
        </div>
        <div class="modal-footer">
          <button id="cancelDeleteBtn" class="btn btn-secondary">
            Cancelar
          </button>
          <button id="confirmDeleteBtn" class="btn btn-danger" disabled>
            Excluir Permanentemente
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/modules/firebase/config.js"></script>
    <script type="module" src="js/modules/settings.js"></script>
    <script type="module" src="js/modules/profile.js"></script>
  </body>
</html>
