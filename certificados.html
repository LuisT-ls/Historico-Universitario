<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Certificados e Atividades Complementares - Histórico Universitário
    </title>
    <meta
      name="description"
      content="Gerencie seus certificados e atividades complementares acadêmicas"
    />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/x-icon"
      href="/assets/img/favicon/favicon.ico"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/img/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/assets/img/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/img/favicon/favicon-16x16.png"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="/assets/css/modules/layout/navigation.css" />
    <link
      rel="stylesheet"
      href="/assets/css/modules/components/certificados.css"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json" />
  </head>
  <body>
    <!-- Página de certificados ativada -->
    <!-- Header -->
    <header class="site-header">
      <div class="container">
        <!-- Data e hora -->
        <time class="datetime-display" id="current-datetime" datetime=""></time>

        <!-- Saudação do usuário (centralizada) -->
        <div class="user-info-section">
          <div class="user-greeting" id="userGreeting" style="display: none">
            <span
              >Olá, <span class="user-name" id="userName">Usuário</span></span
            >
          </div>
        </div>

        <!-- Dark Mode Toggle -->
        <div class="dark-mode-toggle" id="darkModeToggle"></div>

        <!-- Menu hambúrguer (visível apenas no mobile) -->
        <button
          class="menu-toggle"
          id="menuToggle"
          aria-label="Abrir menu de navegação"
        >
          <span></span>
          <span></span>
          <span></span>
        </button>

        <!-- Overlay para fechar o menu no mobile -->
        <div class="nav-overlay" id="navOverlay"></div>

        <!-- Navegação principal -->
        <nav class="main-nav" id="mainNav">
          <!-- Links de navegação -->
          <a href="/" class="nav-link">
            <i class="fas fa-home"></i>
            <span>Início</span>
          </a>

          <a
            href="/certificados.html"
            class="nav-link active"
            id="certificadosLink"
          >
            <i class="fas fa-certificate"></i>
            <span>Certificados</span>
          </a>

          <a
            href="/profile.html"
            class="nav-link"
            id="profileLink"
            style="display: none"
          >
            <i class="fas fa-user"></i>
            <span>Perfil</span>
          </a>

          <!-- Separador visual no menu mobile -->
          <div class="mobile-separator" style="display: none">
            <hr
              style="
                margin: 1rem;
                border: none;
                height: 1px;
                background: var(--border-color);
              "
            />
          </div>

          <!-- Opções do usuário (visíveis no menu mobile quando logado) -->
          <a
            href="/profile.html"
            class="nav-link mobile-user-option"
            id="editProfileMobile"
            style="display: none"
          >
            <i class="fas fa-user-edit"></i>
            <span>Editar Perfil</span>
          </a>

          <a
            href="#"
            class="nav-link mobile-user-option"
            id="changePasswordMobile"
            style="display: none"
          >
            <i class="fas fa-key"></i>
            <span>Alterar Senha</span>
          </a>

          <!-- Botões de autenticação -->
          <a href="#" class="nav-link" id="logoutBtnNav" style="display: none">
            <i class="fas fa-sign-out-alt"></i>
            <span>Sair</span>
          </a>

          <a
            href="/login.html"
            class="nav-link"
            id="loginBtnNav"
            style="display: none"
          >
            <i class="fas fa-sign-in-alt"></i>
            <span>Entrar</span>
          </a>
        </nav>

        <!-- Navegação do usuário (visível apenas no desktop) -->
        <div class="user-navigation">
          <div class="user-dropdown" id="userDropdown" style="display: none">
            <ul class="user-menu">
              <li>
                <a href="/profile.html" class="menu-item">
                  <i class="fas fa-user-edit"></i>
                  <span>Editar Perfil</span>
                </a>
              </li>
              <li>
                <a href="#" class="menu-item" id="changePasswordBtn">
                  <i class="fas fa-key"></i>
                  <span>Alterar Senha</span>
                </a>
              </li>
              <li>
                <button class="menu-item logout-button" id="logoutBtn">
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Sair</span>
                </button>
              </li>
            </ul>
          </div>

          <!-- Botão para usuário não autenticado -->
          <button class="btn btn-primary" id="loginBtn" style="display: none">
            <i class="fas fa-sign-in-alt"></i>
            <span>Entrar</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <div class="container">
        <div class="page-header">
          <h1>
            <i class="fas fa-certificate"></i> Certificados e Atividades
            Complementares
          </h1>
          <p>
            Gerencie seus certificados, comprovantes de extensão e outras
            atividades complementares
          </p>
        </div>

        <!-- Estatísticas -->
        <section class="stats-section">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-certificate"></i>
              </div>
              <div class="stat-content">
                <h3>Total de Certificados</h3>
                <div class="stat-value" id="totalCertificados">0</div>
                <div class="stat-label">Certificados cadastrados</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-clock"></i>
              </div>
              <div class="stat-content">
                <h3>Horas Validadas</h3>
                <div class="stat-value" id="horasValidadas">0</div>
                <div class="stat-label">Horas aprovadas</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="stat-content">
                <h3>Atividades Aprovadas</h3>
                <div class="stat-value" id="atividadesAprovadas">0</div>
                <div class="stat-label">Certificados aprovados</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-hourglass-half"></i>
              </div>
              <div class="stat-content">
                <h3>Horas Pendentes</h3>
                <div class="stat-value" id="horasPendentes">0</div>
                <div class="stat-label">Aguardando validação</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Formulário de Adição -->
        <section class="form-section">
          <div class="section-header">
            <h2><i class="fas fa-plus-circle"></i> Adicionar Certificado</h2>
            <p>Cadastre um novo certificado ou atividade complementar</p>
          </div>

          <form id="certificadoForm" class="certificado-form">
            <div class="form-row">
              <div class="form-group">
                <label for="titulo">
                  <i class="fas fa-tag"></i> Título da Atividade
                </label>
                <input
                  type="text"
                  id="titulo"
                  name="titulo"
                  required
                  placeholder="Ex: Curso de Python para Iniciantes"
                />
              </div>
              <div class="form-group">
                <label for="tipo">
                  <i class="fas fa-list"></i> Tipo de Atividade
                </label>
                <select id="tipo" name="tipo" required>
                  <option value="">Selecione o tipo</option>
                  <option value="curso">Curso</option>
                  <option value="workshop">Workshop</option>
                  <option value="palestra">Palestra</option>
                  <option value="evento">Evento</option>
                  <option value="projeto">Projeto de Extensão</option>
                  <option value="pesquisa">Projeto de Pesquisa</option>
                  <option value="monitoria">Monitoria</option>
                  <option value="estagio">Estágio</option>
                  <option value="outro">Outro</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="instituicao">
                  <i class="fas fa-university"></i> Instituição
                </label>
                <input
                  type="text"
                  id="instituicao"
                  name="instituicao"
                  required
                  placeholder="Ex: Universidade Federal da Bahia"
                />
              </div>
              <div class="form-group">
                <label for="cargaHoraria">
                  <i class="fas fa-clock"></i> Carga Horária (horas)
                </label>
                <input
                  type="number"
                  id="cargaHoraria"
                  name="cargaHoraria"
                  required
                  min="1"
                  placeholder="Ex: 20"
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="dataInicio">
                  <i class="fas fa-calendar"></i> Data de Início
                </label>
                <input type="date" id="dataInicio" name="dataInicio" required />
              </div>
              <div class="form-group">
                <label for="dataFim">
                  <i class="fas fa-calendar-check"></i> Data de Conclusão
                </label>
                <input type="date" id="dataFim" name="dataFim" required />
              </div>
            </div>

            <div class="form-group">
              <label for="descricao">
                <i class="fas fa-align-left"></i> Descrição
              </label>
              <textarea
                id="descricao"
                name="descricao"
                rows="3"
                placeholder="Descreva brevemente a atividade realizada..."
              ></textarea>
            </div>

            <div class="form-group">
              <label for="certificadoFile">
                <i class="fas fa-file-pdf"></i> Certificado (PDF)
              </label>
              <input
                type="file"
                id="certificadoFile"
                name="certificadoFile"
                accept=".pdf"
                required
              />
              <small>Somente arquivos PDF são aceitos</small>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                Salvar Certificado
              </button>
              <button type="button" class="btn btn-secondary" id="limparForm">
                <i class="fas fa-eraser"></i>
                Limpar
              </button>
            </div>
          </form>
        </section>

        <!-- Lista de Certificados -->
        <section class="certificados-section">
          <div class="section-header">
            <h2><i class="fas fa-list"></i> Meus Certificados</h2>
            <div class="section-actions">
              <button class="btn btn-secondary" id="exportarCertificados">
                <i class="fas fa-download"></i>
                Exportar
              </button>
              <button class="btn btn-primary" id="adicionarCertificado">
                <i class="fas fa-plus"></i>
                Adicionar
              </button>
            </div>
          </div>

          <div class="certificados-grid" id="certificadosGrid">
            <!-- Certificados serão carregados aqui dinamicamente -->
          </div>

          <div class="empty-state" id="emptyState" style="display: none">
            <div class="empty-icon">
              <i class="fas fa-certificate"></i>
            </div>
            <p>
              Comece adicionando seu primeiro certificado ou atividade
              complementar
            </p>
          </div>
        </section>
      </div>
    </main>

    <!-- Modal de Visualização -->
    <div class="modal-overlay" id="certificadoModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3><i class="fas fa-eye"></i> Visualizar Certificado</h3>
          <button class="modal-close" id="closeCertificadoModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div id="certificadoPreview">
            <!-- Preview do certificado será carregado aqui -->
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="downloadCertificado">
            <i class="fas fa-download"></i>
            Download
          </button>
          <button class="btn btn-primary" id="closeModal">Fechar</button>
        </div>
      </div>
    </div>

    <!-- Modal de Confirmação de Exclusão -->
    <div class="modal-overlay" id="deleteModal">
      <div class="modal-content danger">
        <div class="modal-header">
          <h3>
            <i class="fas fa-exclamation-triangle"></i> Confirmar Exclusão
          </h3>
        </div>
        <div class="modal-body">
          <p>Tem certeza que deseja excluir este certificado?</p>
          <p><strong>Esta ação não pode ser desfeita.</strong></p>
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="cancelDelete">Cancelar</button>
          <button class="btn btn-danger" id="confirmDelete">
            <i class="fas fa-trash"></i>
            Excluir
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="/js/modules/firebase/config.js"></script>
    <script type="module" src="/js/modules/firebase/auth.js"></script>
    <script type="module" src="/js/modules/firebase/data.js"></script>
    <script type="module" src="/js/modules/certificados.js"></script>
    <script type="module" src="/js/certificados-app.js"></script>
  </body>
</html>
